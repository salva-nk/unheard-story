<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unheard - Sign In</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
}

body{
  font-family:'Poppins', sans-serif;
  color:#f3eadb;
  height:100vh;
  background:
  linear-gradient(rgba(24,55,60,0.85), rgba(18,40,45,0.92)),
  url('https://images.unsplash.com/photo-1492724441997-5dc865305da7');
  background-size:cover;
  background-position:center;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
}

.circle{
  position:absolute;
  border-radius:50%;
  background:rgba(255,255,255,0.05);
  animation:float 18s infinite ease-in-out;
}

.circle:nth-child(1){
  width:140px;height:140px;top:10%;left:15%;
}
.circle:nth-child(2){
  width:200px;height:200px;bottom:10%;right:15%;
  animation-duration:25s;
}

@keyframes float{
  0%{transform:translateY(0);}
  50%{transform:translateY(-30px);}
  100%{transform:translateY(0);}
}

.container{
  z-index:2;
  width:350px;
  padding:35px;
  border-radius:20px;
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(15px);
  box-shadow:0 8px 30px rgba(0,0,0,0.4);
  text-align:center;
}

h1{
  font-family:'Playfair Display', serif;
  margin-bottom:25px;
  letter-spacing:2px;
}

input{
  width:100%;
  padding:10px;
  margin:10px 0;
  border-radius:10px;
  border:none;
  outline:none;
}

button{
  width:100%;
  padding:12px;
  border-radius:25px;
  border:none;
  margin-top:15px;
  cursor:pointer;
  background:#2f6f73;
  color:#f3eadb;
}

.error{
  color:#ffb3b3;
  font-size:13px;
  margin-top:8px;
  display:none;
}
</style>
</head>

<body>

<div class="circle"></div>
<div class="circle"></div>

<div class="container">
<h1>Welcome Back</h1>

<input type="email" id="email" placeholder="Email">
<input type="password" id="password" placeholder="Password">

<button onclick="signIn()">Sign In</button>

<p class="error" id="errorMsg"></p>
</div>

<script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm"

const supabaseUrl = "https://waeyeljhdgbxnemtogjf.supabase.co"
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndhZXllbGpoZGdieG5lbXRvZ2pmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEwMDI0NzEsImV4cCI6MjA4NjU3ODQ3MX0.sh6my87l_wo6yfLEKitcDKINzr1DJjQl3K1OOxFNJXE"

const supabase = createClient(supabaseUrl, supabaseKey)

async function signIn(){
  const email = document.getElementById("email").value.trim()
  const password = document.getElementById("password").value.trim()
  const errorMsg = document.getElementById("errorMsg")

  const { data, error } = await supabase.auth.signInWithPassword({
    email: email,
    password: password
  })

  if(error){
    errorMsg.innerText = error.message
    errorMsg.style.display = "block"
  } else {
    // âœ… REDIRECT TO SELECTION PAGE
    window.location.href = "selection.html"
  }
}

window.signIn = signIn
</script>

</body>
</html>
