<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unheard - Sign Up</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

<style>

/* ===== GLOBAL ===== */
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
}

body{
  font-family:'Poppins', sans-serif;
  color:#f3eadb;
  min-height:100vh;
  background:
  linear-gradient(rgba(24,55,60,0.88), rgba(18,40,45,0.95)),
  url('https://images.unsplash.com/photo-1492724441997-5dc865305da7');
  background-size:cover;
  background-position:center;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:40px 0;
}

/* Floating circles */
.circle{
  position:absolute;
  border-radius:50%;
  background:rgba(255,255,255,0.05);
  animation:float 18s infinite ease-in-out;
}

.circle:nth-child(1){
  width:140px;height:140px;top:10%;left:15%;
}
.circle:nth-child(2){
  width:200px;height:200px;bottom:10%;right:15%;
  animation-duration:25s;
}

@keyframes float{
  0%{transform:translateY(0);}
  50%{transform:translateY(-30px);}
  100%{transform:translateY(0);}
}

/* Container */
.container{
  position:relative;
  z-index:2;
  width:430px;
  padding:35px;
  border-radius:20px;
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(15px);
  box-shadow:0 8px 30px rgba(0,0,0,0.4);
  animation:fadeIn 1.2s ease;
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(20px);}
  to{opacity:1;transform:translateY(0);}
}

h1{
  font-family:'Playfair Display', serif;
  text-align:center;
  margin-bottom:25px;
  letter-spacing:2px;
}

/* Inputs */
input, select{
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:10px;
  border:none;
  outline:none;
  font-size:14px;
}

label{
  font-size:13px;
}

/* Messages */
.message{
  font-size:13px;
  margin-top:8px;
  display:none;
}

.error{
  color:#ffb3b3;
}

.success{
  color:#b8ffb8;
  text-align:center;
}

/* Buttons */
button{
  width:100%;
  padding:12px;
  border-radius:25px;
  border:none;
  margin-top:15px;
  cursor:pointer;
  background:#2f6f73;
  color:#f3eadb;
  transition:0.3s ease;
  font-weight:500;
}

button:hover{
  background:#3f8f94;
  transform:translateY(-3px);
}

.back{
  background:rgba(255,255,255,0.1);
}

.back:hover{
  background:rgba(255,255,255,0.2);
}

</style>
</head>

<body>

<div class="circle"></div>
<div class="circle"></div>

<div class="container">

<h1>Create Account</h1>

<form id="signupForm">

<label>First Name</label>
<input type="text" id="fname" required>

<label>Last Name</label>
<input type="text" id="lname" required>

<label>Date of Birth</label>
<input type="date" id="dob" required>

<label>Email</label>
<input type="email" id="email" required>

<label>Location</label>
<input type="text" id="location" required>

<label>Country</label>
<select id="country" required>
  <option value="">Select Country</option>
  <option>India</option>
  <option>United States</option>
  <option>United Kingdom</option>
  <option>Canada</option>
  <option>Australia</option>
  <option>Germany</option>
  <option>France</option>
  <option>Japan</option>
</select>

<label>Preferred Language</label>
<select id="language" required>
  <option value="">Select Language</option>
  <option>English</option>
  <option>Hindi</option>
  <option>Spanish</option>
  <option>French</option>
  <option>German</option>
  <option>Japanese</option>
</select>

<label>Username</label>
<input type="text" id="username" required>

<label>Password</label>
<input type="password" id="password" required>

<label>Confirm Password</label>
<input type="password" id="confirmPassword" required>

<div id="message" class="message"></div>

<button type="submit">Create Account</button>
<button type="button" class="back" onclick="goHome()">Go Back</button>

</form>

</div>

<script type="module">

import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm"

const supabaseUrl = "https://waeyeljhdgbxnemtogjf.supabase.co"
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndhZXllbGpoZGdieG5lbXRvZ2pmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEwMDI0NzEsImV4cCI6MjA4NjU3ODQ3MX0.sh6my87l_wo6yfLEKitcDKINzr1DJjQl3K1OOxFNJXE"

const supabase = createClient(supabaseUrl, supabaseKey)

document.getElementById("signupForm").addEventListener("submit", async function(e){
  e.preventDefault()

  const fname = document.getElementById("fname").value.trim()
  const lname = document.getElementById("lname").value.trim()
  const email = document.getElementById("email").value.trim()
  const password = document.getElementById("password").value
  const confirmPassword = document.getElementById("confirmPassword").value
  const message = document.getElementById("message")

  message.style.display="none"
  message.className="message"

  if(password.length < 6){
    message.innerText="Password must be at least 6 characters."
    message.classList.add("error")
    message.style.display="block"
    return
  }

  if(password !== confirmPassword){
    message.innerText="Passwords do not match."
    message.classList.add("error")
    message.style.display="block"
    return
  }

  const { data, error } = await supabase.auth.signUp({
    email: email,
    password: password,
    options: {
      data: {
        first_name: fname,
        last_name: lname
      }
    }
  })

  if(error){
    message.innerText = error.message
    message.classList.add("error")
    message.style.display="block"
  } else {
    message.innerText="Account created successfully! Redirecting..."
    message.classList.add("success")
    message.style.display="block"

    setTimeout(()=>{
      window.location.href="signin.html"
    },2000)
  }
})

</script>

</body>
</html>